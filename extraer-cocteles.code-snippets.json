{"generator":"Code Snippets v3.8.1","date_created":"2025-11-01 01:40","snippets":[{"id":5,"name":"Extraer Cocteles","code":"function cocktail_gallery_modal_inline_shortcode() {\n    ob_start();\n    ?>\n    <style>\n    \/* Estilos: tarjeta + modal *\/\n    .cocktail-gallery {\n      display: grid;\n      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n      gap: 1rem;\n      margin-top: 1rem;\n    }\n    .cocktail-card {\n      border: 1px solid #e1e1e1;\n      border-radius: 10px;\n      overflow: hidden;\n      background: #fff;\n      cursor: pointer;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.06);\n      transition: transform .12s ease, box-shadow .12s ease;\n      display:flex;\n      flex-direction:column;\n      height:100%;\n    }\n    .cocktail-card:hover { transform: translateY(-4px); box-shadow:0 8px 18px rgba(0,0,0,0.08); }\n    .cocktail-card img { width:100%; height:150px; object-fit:cover; display:block; }\n    .cocktail-card .card-body { padding:12px; flex:1; display:flex; flex-direction:column; justify-content:space-between; }\n    .cocktail-card h3 { margin:0 0 6px; font-size:1.05rem; }\n    .cocktail-card p.meta { margin:0; font-size:.9rem; color:#666; }\n\n    \/* Modal *\/\n    .cg-modal-backdrop {\n      display:none;\n      position:fixed;\n      inset:0;\n      background:rgba(0,0,0,0.55);\n      align-items:center;\n      justify-content:center;\n      z-index:9999;\n      padding:20px;\n    }\n    .cg-modal {\n      background:#fff;\n      width:100%;\n      max-width:680px;\n      border-radius:12px;\n      box-shadow:0 10px 30px rgba(0,0,0,0.25);\n      overflow:auto;\n      max-height:90vh;\n      padding:18px;\n      position:relative;\n      text-align:center;\n    }\n    .cg-close {\n      position:absolute;\n      right:12px;\n      top:8px;\n      border:none;\n      background:transparent;\n      font-size:20px;\n      cursor:pointer;\n    }\n\n    \/* Imagen m\u00e1s peque\u00f1a en el modal *\/\n    .cg-modal img { \n      width: 55%; \n      max-width: 280px;\n      border-radius: 10px;\n      margin: 10px auto 15px;\n      display: block;\n      box-shadow: 0 4px 10px rgba(0,0,0,0.15);\n    }\n\n    .cg-ingredients { list-style:none; padding:0; margin:0 0 12px 0; }\n    .cg-ingredients li { margin:6px 0; }\n\n    \/* Responsive *\/\n    @media (max-width:420px) {\n      .cocktail-card img { height:130px; }\n      .cg-modal img { width:75%; max-width:220px; }\n    }\n    <\/style>\n\n    <div id=\"cg-controls\" style=\"text-align:center;\">\n      <input id=\"cg-search\" type=\"text\" placeholder=\"Buscar c\u00f3ctel...\" style=\"padding:8px 12px; width:240px; border-radius:8px; border:1px solid #ccc;\">\n      <label style=\"margin-left:12px;\"><input type=\"radio\" name=\"cg-type\" value=\"all\" checked> Todos<\/label>\n      <label style=\"margin-left:8px;\"><input type=\"radio\" name=\"cg-type\" value=\"Alcoholic\"> Alcoh\u00f3licos<\/label>\n      <label style=\"margin-left:8px;\"><input type=\"radio\" name=\"cg-type\" value=\"Non alcoholic\"> No alcoh\u00f3licos<\/label>\n    <\/div>\n\n    <div id=\"cocktail-gallery\" class=\"cocktail-gallery\">Cargando c\u00f3cteles...<\/div>\n\n    <!-- Modal en la misma p\u00e1gina -->\n    <div id=\"cg-modal-backdrop\" class=\"cg-modal-backdrop\" role=\"dialog\" aria-hidden=\"true\">\n      <div class=\"cg-modal\" role=\"document\" aria-modal=\"true\">\n        <button class=\"cg-close\" id=\"cg-close-btn\" aria-label=\"Cerrar\">\u2716<\/button>\n        <div id=\"cg-modal-content\"><\/div>\n      <\/div>\n    <\/div>\n\n    <script>\n    (function(){\n      const letters = 'abcdefghijklmnopqrstuvwxyz'.split('');\n      let allCocktails = [];\n      const gallery = document.getElementById('cocktail-gallery');\n      const searchInput = document.getElementById('cg-search');\n      const modalBackdrop = document.getElementById('cg-modal-backdrop');\n      const modalContent = document.getElementById('cg-modal-content');\n      const closeBtn = document.getElementById('cg-close-btn');\n\n      async function loadAll() {\n        gallery.innerHTML = '<p style=\"grid-column:1\/-1; text-align:center;\">Cargando c\u00f3cteles (esto puede tardar unos segundos)...<\/p>';\n        for (const l of letters) {\n          try {\n            const r = await fetch(`https:\/\/www.thecocktaildb.com\/api\/json\/v1\/1\/search.php?f=${l}`);\n            const d = await r.json();\n            if (d && d.drinks) {\n              d.drinks.forEach(dr => {\n                if (!allCocktails.some(c => c.idDrink === dr.idDrink)) allCocktails.push(dr);\n              });\n            }\n          } catch (e) {\n            console.error('Error letra', l, e);\n          }\n        }\n        render(allCocktails);\n      }\n\n      function render(list) {\n        if (!list || list.length === 0) {\n          gallery.innerHTML = '<p style=\"grid-column:1\/-1; text-align:center;\">No se encontraron c\u00f3cteles.<\/p>';\n          return;\n        }\n        gallery.innerHTML = '';\n        list.forEach(c => {\n          const card = document.createElement('article');\n          card.className = 'cocktail-card';\n          card.setAttribute('tabindex', '0');\n          card.innerHTML = `\n            <img src=\"${c.strDrinkThumb || ''}\" alt=\"${escapeHtml(c.strDrink)}\">\n            <div class=\"card-body\">\n              <div>\n                <h3>${escapeHtml(c.strDrink)}<\/h3>\n                <p class=\"meta\">${escapeHtml(c.strCategory || '')} \u2022 ${escapeHtml(c.strAlcoholic || '')}<\/p>\n              <\/div>\n              <div style=\"margin-top:8px; text-align:left;\">\n                <small style=\"color:#999\">Tocar para ver detalles<\/small>\n              <\/div>\n            <\/div>\n          `;\n          card.addEventListener('click', ()=> openModal(c));\n          card.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') openModal(c); });\n          gallery.appendChild(card);\n        });\n      }\n\n      function openModal(cocktail) {\n        let ingHtml = '';\n        for (let i=1;i<=15;i++){\n          const ingr = cocktail[`strIngredient${i}`];\n          const meas = cocktail[`strMeasure${i}`];\n          if (ingr) ingHtml += `<li>${escapeHtml((meas||'').trim())} ${escapeHtml(ingr)}<\/li>`;\n        }\n        modalContent.innerHTML = `\n          <h2 style=\"margin-top:0\">${escapeHtml(cocktail.strDrink)}<\/h2>\n          <img src=\"${cocktail.strDrinkThumb || ''}\" alt=\"${escapeHtml(cocktail.strDrink)}\">\n          <h3>Ingredientes<\/h3>\n          <ul class=\"cg-ingredients\">${ingHtml}<\/ul>\n          <h3>Preparaci\u00f3n<\/h3>\n          <p>${escapeHtml(cocktail.strInstructions || 'Sin instrucciones')}<\/p>\n          <p style=\"color:#666; margin-top:10px;\"><strong>Categor\u00eda:<\/strong> ${escapeHtml(cocktail.strCategory||'N\/A')} \u2022 <strong>Tipo:<\/strong> ${escapeHtml(cocktail.strAlcoholic||'N\/A')}<\/p>\n        `;\n        modalBackdrop.style.display = 'flex';\n        modalBackdrop.setAttribute('aria-hidden','false');\n        closeBtn.focus();\n      }\n\n      function closeModal() {\n        modalBackdrop.style.display = 'none';\n        modalBackdrop.setAttribute('aria-hidden','true');\n      }\n\n      function applyFilters() {\n        const term = (searchInput.value || '').trim().toLowerCase();\n        const tipo = document.querySelector('input[name=\"cg-type\"]:checked')?.value || 'all';\n        const filtered = allCocktails.filter(c => {\n          const matchText = c.strDrink && c.strDrink.toLowerCase().includes(term);\n          const matchTipo = (tipo === 'all') || ( (c.strAlcoholic||'').toLowerCase() === tipo.toLowerCase() );\n          return matchText && matchTipo;\n        });\n        render(filtered);\n      }\n\n      function escapeHtml(str) {\n        if (!str) return '';\n        return String(str)\n          .replace(\/&\/g, '&amp;')\n          .replace(\/<\/g, '&lt;')\n          .replace(\/>\/g, '&gt;')\n          .replace(\/\"\/g, '&quot;')\n          .replace(\/'\/g, '&#039;');\n      }\n\n      document.addEventListener('DOMContentLoaded', function(){\n        loadAll();\n        searchInput.addEventListener('input', debounce(applyFilters, 250));\n        document.querySelectorAll('input[name=\"cg-type\"]').forEach(r => r.addEventListener('change', applyFilters));\n        closeBtn.addEventListener('click', closeModal);\n        modalBackdrop.addEventListener('click', (e)=> { if (e.target === modalBackdrop) closeModal(); });\n        document.addEventListener('keydown', (e)=> { if (e.key === 'Escape') closeModal(); });\n      });\n\n      function debounce(fn, wait) {\n        let t;\n        return function(...args){ clearTimeout(t); t = setTimeout(()=>fn.apply(this,args), wait); };\n      }\n\n    })();\n    <\/script>\n\n    <?php\n    return ob_get_clean();\n}\nadd_shortcode('cocktail_gallery_modal_inline', 'cocktail_gallery_modal_inline_shortcode');","active":true,"modified":"2025-10-31 15:25:17","revision":"1"}]}